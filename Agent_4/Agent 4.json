f{
  "name": "Agent 4",
  "nodes": [
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "id": "7ee2e6d1-d102-4387-96d2-fc8bfa5ebbe9",
      "name": "Extract Resume Text (PDF)1",
      "type": "n8n-nodes-base.extractFromFile",
      "position": [
        2272,
        16
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 2062157588,
          "mode": "list",
          "cachedResultName": "Job_offers",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=2062157588"
        },
        "options": {}
      },
      "id": "a26384a1-9a1f-4c39-8a5b-11a72fd2dd63",
      "name": "Retrieve Job Offer Details (Google Sheets)1",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        2464,
        16
      ],
      "typeVersion": 4.6,
      "alwaysOutputData": true,
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Here is the candidate's resume:\n{{ $node[\"Extract Resume Text (PDF)1\"].json[\"text\"] }}\n\nHere is the job role to evaluate:\n{{ $json.allJobPostings }}\n\nCompare the resume to the best matching job role, score it from 0â€“10, and provide the structured JSON output exactly in the required format.\n\nIdentify exactly 3-5 specific technical skills, tools, frameworks, or certifications mentioned in the resume.\n\nReply by Email:\nSend a reply to the candidate at {{ $node[\"New Candidates\"].json[\"Email\"] }} to confirm that we have received their application and that our AI voice agent will contact them soon.\n{{ $node[\"New Candidates\"].json[\"Name\"] }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=You are an expert AI HR Assistant trained to evaluate a candidate's resume against multiple job roles.\n\nYou are given:\n\nA candidate's resume text.\n\nMultiple job roles (titles + descriptions).\n\nYour task:\n\nCompare the candidate's experience, education, and skills with each job description.\n\nScore the match on a scale of 0â€“10.\n\nGive one concise, factual reason for the score.\n\nExtract personal details (name, email, LinkedIn, phone, location) from the resume.\n\nIdentify 3-5 specific technical skills, tools, frameworks, or certifications mentioned in the resume.\n\nScoring Guidelines:\n\n0â€“3 â†’ Poor match (few relevant skills or experience)\n\n4â€“6 â†’ Partial match (some overlap but lacks key requirements)\n\n7â€“8 â†’ Good match (meets most requirements)\n\n9â€“10 â†’ Excellent match (strong alignment with the role)\n\nReturn only JSON, matching this exact structure (no arrays, no extra text):\n\n{\n\"name\": \"<Extracted from resume>\",\n\"email\": \"<Extracted from resume>\",\n\"linkedin\": \"<Extracted from resume>\",\n\"Phone\": \"<Extracted from resume>\",\n\"Location\": \"<Extracted from resume>\",\n\"Job Title\": \"<Job title>\",\n\"Specific Skills or Tools\": \"<3-5 comma-separated technical skills, tools, frameworks, or certifications>\",\n\"score\": \"<0â€“10>\",\n\"Reason\": \"<1-line factual justification>\",\n}\n\nReply by Email: \"Dear <First Name>,\\n\\nThank you for applying to Spearhead for the <Job Title> position! We're thrilled to see your interest in joining our innovation-driven team. Our AI voice agent will be connecting with you very soon to discuss this exciting opportunity.\\n\\nIn the meantime, feel free to explore more about our mission at https://www.spearhead.so/about.\\n\\nWarm regards,\\nThe Spearhead Recruiting Team\\nInnovating Intelligence Together ðŸš€\""
        }
      },
      "id": "4da56159-2411-430f-8109-d2d664162e40",
      "name": "AI Agent: Score Resume1",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        3040,
        112
      ],
      "typeVersion": 1.8
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "o4-mini",
          "cachedResultName": "o4-mini"
        },
        "options": {}
      },
      "id": "8fe7e909-486e-472d-9704-7a8131653017",
      "name": "OpenAI Model â€“ Resume Scoring1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        2960,
        368
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "2JgRKniRVngZeGh6",
          "name": "Axia OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('To', ``, 'string') }}",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "emailType": "text",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {}
      },
      "id": "73972e0f-da93-4109-945f-7ff32028243c",
      "name": "Send Confirmation Email1",
      "type": "n8n-nodes-base.gmailTool",
      "position": [
        3136,
        368
      ],
      "webhookId": "b56651a5-a82e-4550-ae4e-ffea0304cd52",
      "typeVersion": 2.1,
      "credentials": {
        "gmailOAuth2": {
          "id": "fCMgacnBtFgIqVBE",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n\t\"type\": \"object\",\n\t\"properties\": {\n      \"Job Title\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n      \"Reason\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n      \"Specific Skills or Tools\": {\n\t\t\t\"type\": \"string\"\n\t\t},     \n\t  \"name\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n      \"email\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n      \"linkedin\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n      \"score\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n      \"Phone\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n      \"Location\": {\n\t\t\t\"type\": \"string\"\n\t\t}\n\t\t\n\t}\n}"
      },
      "id": "610d55c9-3930-4246-b1fd-2494862ef721",
      "name": "Parse Resume Evaluation Result1",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        3312,
        368
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Resume_info",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Email": "={{ $node[\"Only Candidate with Email\"].json[\"Email\"] }}",
            "LinkedIn": "={{ $json.output.linkedin }}",
            "Phone": "={{ $json.output.Phone }}",
            "Location": "={{ $json.output.Location }}",
            "Score": "={{ $json.output.score }}",
            "Resume text": "={{ $node[\"Extract Resume Text (PDF)1\"].json[\"text\"] }}",
            "Suitable Job Role": "={{ $json.output[\"Job Title\"] }}",
            "Reason": "={{ $json.output.Reason }}"
          },
          "matchingColumns": [
            "Email"
          ],
          "schema": [
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn",
              "displayName": "LinkedIn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Phone",
              "displayName": "Phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Score",
              "displayName": "Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Suitable Job Role",
              "displayName": "Suitable Job Role",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Reason",
              "displayName": "Reason",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Resume text",
              "displayName": "Resume text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Link CV",
              "displayName": "Link CV",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Have Been classified?",
              "displayName": "Have Been classified?",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "b5bdfff0-6faa-45b9-942d-a4332682856d",
      "name": "Save Score to Google Sheets1",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        3008,
        -112
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nlet combinedText = \"\";\n\nfor (const item of items) {\n  const jobData = item.json;\n  \n  combinedText += `Row Number: ${jobData.row_number}\\n`;\n  combinedText += `Job Title: ${jobData[\"Job Title\"]}\\n\\n`;\n  combinedText += `${jobData.Description}\\n\\n`;\n  combinedText += `${\"=\".repeat(80)}\\n\\n`;\n}\n\n// Return single item with combined data\nreturn [{\n  json: {\n    allJobPostings: combinedText,\n    totalJobsProcessed: items.length\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2640,
        16
      ],
      "id": "bc23437f-d74b-4cc5-bcfa-32e2994711a7",
      "name": "Code in JavaScript",
      "executeOnce": false
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2816,
        16
      ],
      "id": "09747dd9-655d-45ca-a9d7-78c327a94677",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "name": "={{ $('Application Form').item.json.Email }}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive",
          "cachedResultName": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7",
          "mode": "list",
          "cachedResultName": "New Candidate CV's",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7"
        },
        "options": {}
      },
      "id": "fe00bbd1-c849-46bf-be7f-d8b42f59f191",
      "name": "Save Resume to Google Drive2",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        -192,
        80
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "sH7sMnSy8pnKPbWQ",
          "name": "Google Drive account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Resume_info",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Email": "={{ $('Application Form').item.json.Email }}",
            "Name": "={{ $('Application Form').item.json[\"Full Name\"] }}",
            "Link CV": "={{ $('Save Resume to Google Drive2').item.json.webViewLink }} "
          },
          "matchingColumns": [
            "Email"
          ],
          "schema": [
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn",
              "displayName": "LinkedIn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Phone",
              "displayName": "Phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Score",
              "displayName": "Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Suitable Job Role",
              "displayName": "Suitable Job Role",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Reason",
              "displayName": "Reason",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Resume text",
              "displayName": "Resume text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Link CV",
              "displayName": "Link CV",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Have Been classified?",
              "displayName": "Have Been classified?",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "useAppend": true
        }
      },
      "id": "f14fec55-8fcc-4ca8-b78d-7483e6461416",
      "name": "Save CV to Google Sheets2",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -16,
        80
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "formTitle": "Submit Your Application",
        "formDescription": "Please fill out the form below and upload your CV to apply.",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Full Name",
              "placeholder": "e.g., Jane Doe",
              "requiredField": true
            },
            {
              "fieldLabel": "Email",
              "placeholder": "e.g., jane.doe@example.com",
              "requiredField": true
            },
            {
              "fieldLabel": "Upload CV",
              "fieldType": "file",
              "acceptFileTypes": ".pdf",
              "requiredField": true
            }
          ]
        },
        "responseMode": "lastNode",
        "options": {
          "appendAttribution": false,
          "buttonLabel": "Submit Application",
          "path": "230e09f7-33df-4266-917d-ce3398cae141",
          "customCss": "/* --- ROOT VARIABLES (Dark Professional Theme) --- */\n:root {\n\t/* --- FONT MAPPING --- */\n\t--font-family: 'Inter', sans-serif;\n\t--font-weight-normal: 400;\n\t--font-weight-bold: 600;\n\t--font-size-body: 14px;\n\t--font-size-label: 14px;\n\t--font-size-input: 14px;\n\t--font-size-header: 24px;\n\t--line-height-base: 1.6;\n\n\t/* --- COLOR MAPPING (Dark Slate/Purple Theme) --- */\n\t--color-page-bg: #111827; /* Dark Slate */\n\t--color-card-bg-glass: rgba(29, 39, 53, 0.65); /* Darker, less transparent glass */\n\t--color-card-border-glass: rgba(255, 255, 255, 0.1); /* Subtle light border */\n\t--color-input-bg: #1F2937; /* Slightly lighter than page bg */\n\t--color-header: #F9FAFB; /* Off-white for high contrast */\n\t--color-label: #9CA3AF; /* Light gray for secondary text */\n\t--color-input-text: #F9FAFB;\n\t--color-input-border: #4B5563; /* Mid-gray border */\n\t--color-focus-border: #8B5CF6; /* Vibrant Purple */\n\t--color-link: #8B5CF6;\n\t--color-submit-btn-bg: #8B5CF6;\n\t--color-submit-btn-hover-bg: #7C3AED; /* Darker Purple */\n\t--color-submit-btn-text: #FFFFFF;\n\t--color-error: #F43F5E; /* Vibrant Rose for errors */\n\t--color-required: #F43F5E;\n\n\t/* --- DIMENSIONS & SPACING --- */\n\t--container-width: 550px;\n\t--border-radius-card: 16px;\n\t--border-radius-input: 8px;\n\t--padding-card: 32px;\n\t--padding-form-input: 14px;\n\t--submit-btn-height: 48px;\n\t--checkbox-size: 20px;\n\n\t/* --- EFFECTS & ANIMATIONS --- */\n\t--box-shadow-card: 0 16px 50px rgba(0, 0, 0, 0.3); /* Deeper shadow for dark mode */\n\t--transition-speed: 0.25s;\n\t--animation-speed-fast: 0.2s;\n\t--animation-speed-normal: 0.4s;\n}\n\n/* === KEYFRAME ANIMATIONS === */\n@keyframes fadeInSlideUp {\n    from {\n        opacity: 0;\n        transform: translateY(20px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n@keyframes backgroundPan {\n\t0% { background-position: 0% 50%; }\n\t50% { background-position: 100% 50%; }\n\t100% { background-position: 0% 50%; }\n}\n\n/* === GLOBAL LAYOUT & STYLES === */\nbody {\n    /* Dynamic animated aurora gradient background */\n    background-color: var(--color-page-bg);\n    background-image:\n        radial-gradient(at 20% 100%, hsla(278, 60%, 45%, 0.2) 0px, transparent 50%),\n        radial-gradient(at 80% 0%, hsla(215, 60%, 40%, 0.2) 0px, transparent 50%),\n        radial-gradient(at 50% 50%, hsla(259, 70%, 55%, 0.1) 0px, transparent 50%);\n    background-size: 200% 200%;\n    animation: backgroundPan 15s ease-in-out infinite;\n\n    line-height: var(--line-height-base);\n    font-size: var(--font-size-body);\n    color: var(--color-label); /* Set default text color for body */\n\n    /* Flexbox properties for true centering */\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-height: 100vh;\n    margin: 0;\n    overflow-x: hidden; /* Prevent horizontal scroll from large gradients */\n}\n\n.form-container {\n    padding: 2rem 1rem;\n}\n\n/* === THE GLASSMORPHISM CARD === */\n.card {\n    background: var(--color-card-bg-glass);\n    backdrop-filter: blur(16px) saturate(150%);\n    -webkit-backdrop-filter: blur(16px) saturate(150%);\n    border-radius: var(--border-radius-card);\n    border: 1px solid var(--color-card-border-glass);\n    box-shadow: var(--box-shadow-card);\n    transition: box-shadow var(--animation-speed-normal) ease;\n\n    /* Card Load-in Animation */\n    animation: fadeInSlideUp 0.6s ease-out forwards;\n}\n.card:hover {\n    box-shadow: 0 0 50px rgba(139, 92, 246, 0.15); /* Subtle purple glow on hover */\n}\n\n/* === FORM ELEMENT STYLING === */\n.form-input {\n    border-radius: var(--border-radius-input);\n    transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;\n    background-color: var(--color-input-bg);\n    border: 1px solid var(--color-input-border);\n    color: var(--color-input-text);\n}\n.form-input::placeholder {\n    color: var(--color-label);\n    opacity: 0.7;\n}\n.form-input:focus {\n    /* Glow effect on focus */\n    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.25);\n    border-color: var(--color-focus-border);\n    outline: none; /* Remove default outline */\n}\n\ntextarea.form-input {\n    min-height: 150px;\n    resize: vertical;\n}\n\n/* Submit Button */\nbutton.submit-btn {\n    transition: all var(--transition-speed) ease-in-out;\n    font-family: var(--font-family);\n    font-weight: var(--font-weight-bold);\n    color: var(--color-submit-btn-text);\n    background-color: var(--color-submit-btn-bg);\n    border-radius: var(--border-radius-input);\n    border: none;\n    cursor: pointer;\n}\nbutton.submit-btn:hover {\n    background-color: var(--color-submit-btn-hover-bg);\n    /* Add a lift and glow effect on hover */\n    transform: translateY(-3px);\n    box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);\n}\n\n/* === MODERN CHECKBOX STYLING === */\nlabel.multiselect-label {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    position: relative;\n    padding: 8px 0;\n}\nlabel.multiselect-label span {\n    padding-left: 12px;\n    color: var(--color-label);\n    transition: color var(--transition-speed) ease;\n}\nlabel.multiselect-label:hover span {\n    color: var(--color-input-text); /* Lighten label text on hover */\n}\nlabel.multiselect-label input[type=\"checkbox\"] {\n    position: absolute;\n    opacity: 0;\n    cursor: pointer;\n    height: 0;\n    width: 0;\n}\nlabel.multiselect-label span::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    width: var(--checkbox-size);\n    height: var(--checkbox-size);\n    background-color: var(--color-input-bg);\n    border: 1px solid var(--color-input-border);\n    border-radius: 6px;\n    transition: all var(--animation-speed-fast) ease-in-out;\n}\nlabel.multiselect-label input[type=\"checkbox\"]:checked + span::before {\n    background-color: var(--color-focus-border);\n    border-color: var(--color-focus-border);\n    background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='white'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e\");\n    background-position: center;\n    background-repeat: no-repeat;\n    /* Animation for the checkmark appearing */\n    transform: translateY(-50%) scale(1.05);\n}\nlabel.multiselect-label input[type=\"checkbox\"]:focus-visible + span::before {\n    /* Use a glow for focus instead of a harsh outline */\n    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3);\n}"
        }
      },
      "id": "573a2e5c-51d5-4d13-8e23-bbf0013e1146",
      "cid": "Ikx1Y2FzIFBleXJpbiI",
      "name": "Application Form",
      "type": "n8n-nodes-base.formTrigger",
      "creator": "Lucas Peyrin",
      "position": [
        -1152,
        -112
      ],
      "webhookId": "230e09f7-33df-4266-917d-ce3398cae141",
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "ff672b26-d283-4192-92f6-a07a039a8a1b",
              "leftValue": "={{ $json.id }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -656,
        -16
      ],
      "id": "eedc5c70-e4c8-4e73-8f47-5254d82e52e9",
      "name": "If5"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Resume_info",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Email": "={{ $('Application Form').item.json.Email }}",
            "Name": "={{ $('Application Form').item.json[\"Full Name\"] }}",
            "Link CV": "={{ $('Update Resume to Google Drive').item.json.webViewLink }} "
          },
          "matchingColumns": [
            "Email"
          ],
          "schema": [
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn",
              "displayName": "LinkedIn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Phone",
              "displayName": "Phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Score",
              "displayName": "Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Suitable Job Role",
              "displayName": "Suitable Job Role",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Reason",
              "displayName": "Reason",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Resume text",
              "displayName": "Resume text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Link CV",
              "displayName": "Link CV",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Have Been classified?",
              "displayName": "Have Been classified?",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "useAppend": true
        }
      },
      "id": "6682f5c1-eb61-4a69-8ebe-d8f8a666daff",
      "name": "Save CV to Google Sheets3",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -16,
        -128
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "fileId": {
          "__rl": true,
          "value": "={{ $('Search existing Resume').item.json.id }}",
          "mode": "id"
        },
        "changeFileContent": true,
        "inputDataFieldName": "Upload_CV",
        "newUpdatedFileName": "={{ $json.Email }}",
        "options": {
          "fields": [
            "webViewLink"
          ]
        }
      },
      "id": "5b83026d-38dc-4065-9d1a-747fa0c23e4f",
      "name": "Update Resume to Google Drive",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        -192,
        -128
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "sH7sMnSy8pnKPbWQ",
          "name": "Google Drive account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "queryString": "={{ $json.Email }}",
        "filter": {
          "driveId": {
            "mode": "list",
            "value": "My Drive"
          },
          "folderId": {
            "__rl": true,
            "value": "1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7",
            "mode": "list",
            "cachedResultName": "New Candidate CV's",
            "cachedResultUrl": "https://drive.google.com/drive/folders/1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7"
          },
          "whatToSearch": "files"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -832,
        -16
      ],
      "id": "8ce4db44-e73f-4415-839b-1e84255799dc",
      "name": "Search existing Resume",
      "alwaysOutputData": true,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "sH7sMnSy8pnKPbWQ",
          "name": "Google Drive account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c06f6782-180b-4779-bf66-cb146eccd99b",
              "name": "=data",
              "value": "={{ $('Application Form').item.binary['Upload_CV'] }}",
              "type": "binary"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -368,
        80
      ],
      "id": "49958a2c-6f26-43d2-8e90-caaa52911cd5",
      "name": "Forward Resume"
    },
    {
      "parameters": {
        "mode": "combine",
        "advanced": true,
        "mergeByFields": {
          "values": [
            {
              "field1": "name",
              "field2": "Email"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -384,
        -128
      ],
      "id": "36a4dd55-820c-421a-918b-e854a371e71f",
      "name": "Merge File Based on the email"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "simple": false,
        "filters": {
          "labelIds": [
            "UNREAD"
          ],
          "q": "has:attachment",
          "readStatus": "unread"
        },
        "options": {
          "downloadAttachments": true
        }
      },
      "id": "936b59e0-548a-48ee-ae6a-e2f4a5520dc7",
      "name": "Gmail: Watch for new CV2",
      "type": "n8n-nodes-base.gmailTrigger",
      "position": [
        -1296,
        832
      ],
      "typeVersion": 1.2,
      "credentials": {
        "gmailOAuth2": {
          "id": "fCMgacnBtFgIqVBE",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "inputText": "={{ $json.text }}",
        "categories": {
          "categories": [
            {
              "category": "Doesn't apply",
              "description": "The candidate is not a job application"
            },
            {
              "category": "Apply",
              "description": "This is a job application submitted by a candidate applying for a position at our organization, included as an attached file."
            }
          ]
        },
        "options": {
          "systemPromptTemplate": "=Classify the user's text into one of the following categories: {categories}.\nFollow the formatting instructions provided below exactly.\nDo not include any explanation â€” output only the final JSON result."
        }
      },
      "id": "f7d65e08-4ed5-4ef6-b47d-2e5e2b43072b",
      "name": "Classify Email Type2",
      "type": "@n8n/n8n-nodes-langchain.textClassifier",
      "position": [
        -848,
        848
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "id": "14a12832-d129-400d-a69b-cce0fa4c31a3",
      "name": "OpenAI Model â€“ Email Classifier2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -880,
        1040
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "2JgRKniRVngZeGh6",
          "name": "Axia OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "id": "623c1999-636d-4c35-b463-93bef806660f",
      "name": "Skip (If not a job application)2",
      "type": "n8n-nodes-base.noOp",
      "position": [
        -480,
        752
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "name": "={{ $('Loop Over Items4').item.json.from.value[0].address }}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive",
          "cachedResultName": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7",
          "mode": "list",
          "cachedResultName": "New Candidate CV's",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7"
        },
        "options": {}
      },
      "id": "9650a482-0f32-4a82-adad-aa951ea8642e",
      "name": "Save Resume to Google Drive3",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        256,
        1232
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "sH7sMnSy8pnKPbWQ",
          "name": "Google Drive account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Resume_info",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Email": "={{ $('Loop Over Items4').item.json.from.value[0].address }}",
            "Name": "={{ $('Loop Over Items4').item.json.from.value[0].name }}",
            "Link CV": "={{ $('Save Resume to Google Drive3').item.json.webViewLink }} "
          },
          "matchingColumns": [
            "Email"
          ],
          "schema": [
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn",
              "displayName": "LinkedIn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Phone",
              "displayName": "Phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Score",
              "displayName": "Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Suitable Job Role",
              "displayName": "Suitable Job Role",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Reason",
              "displayName": "Reason",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Resume text",
              "displayName": "Resume text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Link CV",
              "displayName": "Link CV",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Have Been classified?",
              "displayName": "Have Been classified?",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "useAppend": true
        }
      },
      "id": "16e7858d-bd87-4e80-aaac-2dd7505751fc",
      "name": "Save CV to Google Sheets4",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        432,
        1232
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "ff672b26-d283-4192-92f6-a07a039a8a1b",
              "leftValue": "={{ $json.id }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -208,
        1136
      ],
      "id": "387a7ee2-a0c1-41fa-901c-3880d58f2c83",
      "name": "If6"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Resume_info",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Email": "={{ $('Loop Over Items4').item.json.from.value[0].address }}",
            "Name": "={{ $('Loop Over Items4').item.json.from.value[0].name }}",
            "Link CV": "={{ $('Update Resume to Google Drive1').item.json.webViewLink }} "
          },
          "matchingColumns": [
            "Email"
          ],
          "schema": [
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn",
              "displayName": "LinkedIn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Phone",
              "displayName": "Phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Score",
              "displayName": "Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Suitable Job Role",
              "displayName": "Suitable Job Role",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Reason",
              "displayName": "Reason",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Resume text",
              "displayName": "Resume text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Link CV",
              "displayName": "Link CV",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Have Been classified?",
              "displayName": "Have Been classified?",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "useAppend": true
        }
      },
      "id": "770af61c-3e62-40fe-b692-358a83d2bb88",
      "name": "Save CV to Google Sheets5",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        432,
        1024
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "fileId": {
          "__rl": true,
          "value": "={{ $item(\"0\").$node[\"Search existing Resume1\"].json[\"id\"] }} ",
          "mode": "id"
        },
        "changeFileContent": true,
        "inputDataFieldName": "attachment_0",
        "newUpdatedFileName": "={{ $('Loop Over Items4').item.json.from.value[0].address }}",
        "options": {
          "fields": [
            "webViewLink"
          ]
        }
      },
      "id": "8b7328ff-e1a5-4c83-952e-38363ffb8895",
      "name": "Update Resume to Google Drive1",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        256,
        1024
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "sH7sMnSy8pnKPbWQ",
          "name": "Google Drive account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "queryString": "={{ $json.from.value[0].address }}",
        "filter": {
          "driveId": {
            "mode": "list",
            "value": "My Drive"
          },
          "folderId": {
            "__rl": true,
            "value": "1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7",
            "mode": "list",
            "cachedResultName": "New Candidate CV's",
            "cachedResultUrl": "https://drive.google.com/drive/folders/1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7"
          },
          "whatToSearch": "files"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -384,
        1136
      ],
      "id": "c869a334-3327-4bf0-a905-af7056a19da9",
      "name": "Search existing Resume1",
      "alwaysOutputData": true,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "sH7sMnSy8pnKPbWQ",
          "name": "Google Drive account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c06f6782-180b-4779-bf66-cb146eccd99b",
              "name": "=data",
              "value": "={{ $('Gmail: Watch for new CV2').item.binary['attachment_0'] }}",
              "type": "binary"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        80,
        1232
      ],
      "id": "c6316d07-da8f-4b92-a8b3-5246482ae306",
      "name": "Forward Resume1"
    },
    {
      "parameters": {
        "mode": "combine",
        "advanced": true,
        "mergeByFields": {
          "values": [
            {
              "field1": "={{ $('If6').item.json.name}}",
              "field2": "={{ $('Gmail: Watch for new CV2').item.json.headers.from.extractEmail() }}"
            }
          ]
        },
        "joinMode": "enrichInput2",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        64,
        1024
      ],
      "id": "698919b5-0af3-4441-a3f1-8a0d30e860d1",
      "name": "Merge File Based on the email1",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7",
          "mode": "list",
          "cachedResultName": "New Candidate CV's",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7"
        },
        "event": "fileCreated",
        "options": {}
      },
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [
        1280,
        -128
      ],
      "id": "ba516799-302e-4d7d-8cf7-71f16434008d",
      "name": "Google Drive Trigger",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "sH7sMnSy8pnKPbWQ",
          "name": "Google Drive account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -1072,
        832
      ],
      "id": "78fcbc8b-17ab-4fd2-9480-694d378b2283",
      "name": "Loop Over Items4"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        880,
        1136
      ],
      "id": "2b41e90a-c241-4a59-8c69-97e80c3f5563",
      "name": "No Operation, do nothing"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "0823e60c-98b9-492e-8176-0b12611b237f",
              "leftValue": "={{ $json.Score }}",
              "rightValue": 5,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        3232,
        -112
      ],
      "id": "89dcb580-cae2-4b1d-821b-c87bf5c70e53",
      "name": "If3"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 832343292,
          "mode": "list",
          "cachedResultName": "Candidates_forwaded_for_call",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=832343292"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Email": "={{ $json.Email }}",
            "Suitable Job Role": "={{ $json[\"Suitable Job Role\"] }}",
            "Number": "={{ $json.Phone }}",
            "Name": "={{ $node[\"Only Candidate with Email\"].json[\"Name\"] }}",
            "Specific Skills or Tools": "={{ $node[\"Loop Over Items\"].json[\"output\"][\"Specific Skills or Tools\"] }}"
          },
          "matchingColumns": [
            "Email"
          ],
          "schema": [
            {
              "id": "Suitable Job Role",
              "displayName": "Suitable Job Role",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Specific Skills or Tools",
              "displayName": "Specific Skills or Tools",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Number",
              "displayName": "Number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Classification",
              "displayName": "Classification",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3440,
        -128
      ],
      "id": "2b6740c1-9d07-43c1-ba0a-e28adf078457",
      "name": "Update Name and Phone In Clean sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "operation": "markAsRead",
        "messageId": "={{ $('Classify Email Type2').item.json.id }}"
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        -816,
        656
      ],
      "id": "fbde7a7a-56fe-4a95-aa54-7e7aea427e36",
      "name": "Mark a message as read",
      "webhookId": "3e04cd21-cead-4871-bcde-b44627c30322",
      "credentials": {
        "gmailOAuth2": {
          "id": "fCMgacnBtFgIqVBE",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Resume_info",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Have Been classified?"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1488,
        -128
      ],
      "id": "2f374721-a83b-42d6-b8c1-763f15bf3b4b",
      "name": "New Candidates",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ab4ea185-7efa-4b12-8206-95670b6bb6ad",
              "leftValue": "={{ $json.Email }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1696,
        -128
      ],
      "id": "5079808d-e945-4b1c-ac7f-05c6899361b4",
      "name": "Only Candidate with Email"
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "queryString": "={{ $json.Email }}",
        "filter": {
          "driveId": {
            "mode": "list",
            "value": "My Drive"
          },
          "folderId": {
            "__rl": true,
            "value": "1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7",
            "mode": "list",
            "cachedResultName": "New Candidate CV's",
            "cachedResultUrl": "https://drive.google.com/drive/folders/1sPKK4AkFuAz6v9mDQRE5r4v4jZuFB_p7"
          }
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        1920,
        16
      ],
      "id": "51a94a1d-370d-44b7-9941-15bb07d1a4b6",
      "name": "Search with Email for Resume",
      "executeOnce": true,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "sH7sMnSy8pnKPbWQ",
          "name": "Google Drive account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        2096,
        16
      ],
      "id": "af14024d-1291-4474-a62f-fff581f6cf22",
      "name": "Download Resume",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "sH7sMnSy8pnKPbWQ",
          "name": "Google Drive account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "amount": 15
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        3472,
        1200
      ],
      "id": "e5368230-57a6-495c-b5dd-a0cebba6292e",
      "name": "Wait1",
      "webhookId": "16fea658-5585-4eab-8664-1c6e5157d9a5"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 832343292,
          "mode": "list",
          "cachedResultName": "Candidates_forwaded_for_call",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=832343292"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Status"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        1952,
        1120
      ],
      "id": "a362f58f-ca65-4668-8c67-f2c058f55749",
      "name": "Get Candidates Info for Voice call",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.vapi.ai/call",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer "
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n   \"assistantId\": \"\",\n   \"assistantOverrides\": {\n      \"variableValues\": {\n         \"name\": \"{{ $json.Name }}\",\n         \"suitable_job_role\": \"{{ $json[\"Suitable Job Role\"] }}\",\n         \"specific_skill_or_tool\": \"{{ $json['Specific Skills or Tools'] }}\"\n      }\n   },\n   \"customer\": {\n      \"number\": \"+{{ $json.Number }}\"\n   },\n   \"phoneNumber\": {\n      \"twilioAccountSid\": \"\",\n      \"twilioAuthToken\": \"\",\n      \"twilioPhoneNumber\": \"\"\n   }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2816,
        1216
      ],
      "id": "99e2695b-b7ef-44da-a8e8-72150c0185fd",
      "name": "Vapi HTTP Request"
    },
    {
      "parameters": {
        "url": "https://api.vapi.ai/call",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "id",
              "value": "={{ $json.id }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer "
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3024,
        1216
      ],
      "id": "de06dfb2-bd7d-42bc-8c6f-4befe0790bb1",
      "name": "Vapi HTTP Request4"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "67f5c08a-de40-4d10-bc58-04c89e6e062d",
              "leftValue": "={{ $json.status }}",
              "rightValue": "ended",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        3232,
        1216
      ],
      "id": "cf60e138-5588-4e16-9127-cf80df732fec",
      "name": "Check for call status"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You will receive a summary from a phone call. Your job is to provide an evaluation based on the summary. \n\nYou're recruiting for a senior software engineer role. Please classify the candidate based on their responses.\n\nPossible evaluations:\n-Proceed\n-Maybe (Needs further evaluation)\n-Do no proceed\n\nthe summary: {{ $json.summary }}\n\nIf {{ $json[\"status\"] }} = ended and no {{ $json.summary }} is available from the call, Just evaluate as - Not Answered the Call",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        3680,
        1360
      ],
      "id": "c8814131-a02c-42a1-acee-326190f21bca",
      "name": "Summarize the call"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        3600,
        1584
      ],
      "id": "f785f96c-5952-4eee-82a1-64f045465567",
      "name": "OpenAI Chat Model - Summarize call",
      "credentials": {
        "openAiApi": {
          "id": "2JgRKniRVngZeGh6",
          "name": "Axia OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\t\"classification\": \"Proceed\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3824,
        1584
      ],
      "id": "3f2ec7fc-a12f-46cd-b934-664ea9f46aa1",
      "name": "Parse classification"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 832343292,
          "mode": "list",
          "cachedResultName": "Candidates_info_from_call",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=832343292"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": "={{ $('Get Candidates Info for Voice call').first().json.row_number }}",
            "Classification": "={{ $json.output.classification }}",
            "Summary": "={{$('Vapi HTTP Request4').item.json.summary}}",
            "Status": "Done",
            "Email": "={{ $('Get Candidates Info for Voice call').item.json.Email }}",
            "VAPI Call Id": "={{ $('Vapi HTTP Request4').item.json.id }}"
          },
          "matchingColumns": [
            "Email"
          ],
          "schema": [
            {
              "id": "Suitable Job Role",
              "displayName": "Suitable Job Role",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Specific Skills or Tools",
              "displayName": "Specific Skills or Tools",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Number",
              "displayName": "Number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Classification",
              "displayName": "Classification",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "VAPI Call Link",
              "displayName": "VAPI Call Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "VAPI Call Id",
              "displayName": "VAPI Call Id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4000,
        1360
      ],
      "id": "ddf7dda7-b4b8-40cf-a80a-77923f3227fa",
      "name": "Save summary",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2576,
        1104
      ],
      "id": "e3e89eb7-3716-4a90-8de8-98b0bc38fa40",
      "name": "Loop Over Items2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "303d9ce0-8d97-4639-b3c6-cb005858675a",
              "leftValue": "={{ $json[\"Specific Skills or Tools\"] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2160,
        1120
      ],
      "id": "9ae0c2c9-be9f-455a-a379-0be1570fe9d1",
      "name": "If1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        2384,
        1104
      ],
      "id": "a948db1b-8115-4827-9f91-db16a79255e3",
      "name": "Limit1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        1760,
        1120
      ],
      "id": "686e2bc6-8f59-42ec-b9dc-127066da6281",
      "name": "When clicking â€˜Execute workflowâ€™"
    },
    {
      "parameters": {
        "url": "=https://api.vapi.ai/call/{{ $json[\"VAPI Call Id\"] }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 301011fc-3ca9-4044-9850-623021388e21"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        3328,
        1008
      ],
      "id": "0e1d04f9-3a35-4a9b-9ccc-8edc2230634b",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "url": "={{ $json[\"recordingUrl\"] }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file",
              "outputPropertyName": "=data"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        3648,
        1008
      ],
      "id": "2cb30d93-3127-4fd1-b214-9ec291b0a88b",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_gmail_preprocessing",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 832343292,
          "mode": "list",
          "cachedResultName": "Candidates_forwaded_for_call",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=832343292"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Status",
              "lookupValue": "Done"
            },
            {
              "lookupColumn": "VAPI Call Link"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        2816,
        1008
      ],
      "id": "b2212ce3-e194-4a52-b017-f53a50c7f721",
      "name": "Get Candidates Info for Voice call1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f4a53be0-2a22-4439-b39e-c2c9856f18c5",
              "leftValue": "={{ $json[\"VAPI Call Id\"] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        2976,
        1008
      ],
      "id": "ac16ea79-cd9a-48cf-ab59-171f793a695a",
      "name": "Filter"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "538b591a-9b4b-400d-82f7-6fc6a1c68798",
              "leftValue": "={{ $json[\"endedReason\"] }}",
              "rightValue": "assistant-ended-call",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        3504,
        1008
      ],
      "id": "a7e5b915-a055-4b25-9668-c4d2b2334c8c",
      "name": "Filter1"
    },
    {
      "parameters": {
        "inputDataFieldName": "=data",
        "name": "={{ $node[\"Filter1\"].json[\"customer\"][\"number\"] }}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1EFgvN9D3PS4rZ94Wu6j1sQkN8OsqAOcq",
          "mode": "list",
          "cachedResultName": "Call_Recordings",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1EFgvN9D3PS4rZ94Wu6j1sQkN8OsqAOcq"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        3792,
        1008
      ],
      "id": "3fed4131-8fce-479b-b508-6302f343a4fd",
      "name": "Upload file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "sH7sMnSy8pnKPbWQ",
          "name": "Google Drive account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg",
          "mode": "list",
          "cachedResultName": "Agent_4_data",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 832343292,
          "mode": "list",
          "cachedResultName": "Candidates_info_from_call",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1co9Gp1aSaZoCRKCs4s2xVBPBOMMPjHv6yQnEL5IOmJg/edit#gid=832343292"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "VAPI Call Link": "={{ $json.webViewLink }}",
            "Email": "={{ $('Filter').item.json.Email }}"
          },
          "matchingColumns": [
            "Email"
          ],
          "schema": [
            {
              "id": "Suitable Job Role",
              "displayName": "Suitable Job Role",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Specific Skills or Tools",
              "displayName": "Specific Skills or Tools",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Number",
              "displayName": "Number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Classification",
              "displayName": "Classification",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "VAPI Call Link",
              "displayName": "VAPI Call Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "VAPI Call Id",
              "displayName": "VAPI Call Id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3936,
        1008
      ],
      "id": "39c323c1-5df9-4bd7-a021-54f51a17bbf0",
      "name": "Update row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "5jKTTmgEtu7nHv9m",
          "name": "Google Sheets account Omkar Lokhande"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "097bb9fb-cebd-410b-95ba-a744fb06bb55",
              "leftValue": "={{ $json.Classification }}",
              "rightValue": "Maybe (Needs further evaluation)",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "13fd2540-58e6-4e87-8f94-7aa7f080e072",
              "leftValue": "={{ $json.Classification }}",
              "rightValue": "Proceed",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        3168,
        1008
      ],
      "id": "03f9d8d2-2571-4055-a228-8034fc29319a",
      "name": "Filter2"
    }
  ],
  "pinData": {},
  "connections": {
    "Extract Resume Text (PDF)1": {
      "main": [
        [
          {
            "node": "Retrieve Job Offer Details (Google Sheets)1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retrieve Job Offer Details (Google Sheets)1": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent: Score Resume1": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Model â€“ Resume Scoring1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent: Score Resume1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Send Confirmation Email1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent: Score Resume1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Parse Resume Evaluation Result1": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent: Score Resume1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Save Score to Google Sheets1": {
      "main": [
        [
          {
            "node": "If3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Save Score to Google Sheets1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AI Agent: Score Resume1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save Resume to Google Drive2": {
      "main": [
        [
          {
            "node": "Save CV to Google Sheets2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Application Form": {
      "main": [
        [
          {
            "node": "Search existing Resume",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge File Based on the email",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "If5": {
      "main": [
        [
          {
            "node": "Merge File Based on the email",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Forward Resume",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Resume to Google Drive": {
      "main": [
        [
          {
            "node": "Save CV to Google Sheets3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search existing Resume": {
      "main": [
        [
          {
            "node": "If5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Forward Resume": {
      "main": [
        [
          {
            "node": "Save Resume to Google Drive2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge File Based on the email": {
      "main": [
        [
          {
            "node": "Update Resume to Google Drive",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gmail: Watch for new CV2": {
      "main": [
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Classify Email Type2": {
      "main": [
        [
          {
            "node": "Skip (If not a job application)2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Search existing Resume1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge File Based on the email1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "OpenAI Model â€“ Email Classifier2": {
      "ai_languageModel": [
        [
          {
            "node": "Classify Email Type2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Save Resume to Google Drive3": {
      "main": [
        [
          {
            "node": "Save CV to Google Sheets4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save CV to Google Sheets4": {
      "main": [
        [
          {
            "node": "No Operation, do nothing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If6": {
      "main": [
        [
          {
            "node": "Merge File Based on the email1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Forward Resume1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save CV to Google Sheets5": {
      "main": [
        [
          {
            "node": "No Operation, do nothing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Resume to Google Drive1": {
      "main": [
        [
          {
            "node": "Save CV to Google Sheets5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search existing Resume1": {
      "main": [
        [
          {
            "node": "If6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Forward Resume1": {
      "main": [
        [
          {
            "node": "Save Resume to Google Drive3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge File Based on the email1": {
      "main": [
        [
          {
            "node": "Update Resume to Google Drive1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive Trigger": {
      "main": [
        [
          {
            "node": "New Candidates",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items4": {
      "main": [
        [
          {
            "node": "Mark a message as read",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Classify Email Type2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "No Operation, do nothing": {
      "main": [
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If3": {
      "main": [
        [
          {
            "node": "Update Name and Phone In Clean sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "New Candidates": {
      "main": [
        [
          {
            "node": "Only Candidate with Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Only Candidate with Email": {
      "main": [
        [],
        [
          {
            "node": "Search with Email for Resume",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search with Email for Resume": {
      "main": [
        [
          {
            "node": "Download Resume",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Resume": {
      "main": [
        [
          {
            "node": "Extract Resume Text (PDF)1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "Vapi HTTP Request4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Candidates Info for Voice call": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Vapi HTTP Request": {
      "main": [
        [
          {
            "node": "Vapi HTTP Request4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Vapi HTTP Request4": {
      "main": [
        [
          {
            "node": "Check for call status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check for call status": {
      "main": [
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Summarize the call",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summarize the call": {
      "main": [
        [
          {
            "node": "Save summary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model - Summarize call": {
      "ai_languageModel": [
        [
          {
            "node": "Summarize the call",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Parse classification": {
      "ai_outputParser": [
        [
          {
            "node": "Summarize the call",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Save summary": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [
          {
            "node": "Get Candidates Info for Voice call1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Vapi HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit1": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "Get Candidates Info for Voice call",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Filter1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Upload file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Candidates Info for Voice call1": {
      "main": [
        [
          {
            "node": "Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter": {
      "main": [
        [
          {
            "node": "Filter2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter1": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload file": {
      "main": [
        [
          {
            "node": "Update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter2": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "18fea49b-1b68-429c-91a4-ab2c90032835",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "889a177d21a3fddbce15c79babcf1c94ade5261fd35aa13bedf02e0e8ce5dfca"
  },
  "id": "19F1cHjnIJWYcBmZ",
  "tags": []
}